<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Telegram Mini App - Full Featured</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- –≠–∫—Ä–∞–Ω –∑–∞–≥—Ä—É–∑–∫–∏ -->
    <div class="loading-screen" id="loading-screen">
        <div class="loading-logo">
            <div class="telegram-logo">
                <svg width="64" height="64" viewBox="0 0 240 240" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="120" cy="120" r="120" fill="#3390EC"/>
                    <path d="M81.229 128.772L144.062 161.529C147.807 163.477 150.509 162.701 151.539 158.309L162.411 102.151C163.743 96.8309 160.793 94.6229 157.317 96.2831L50.5 141.136C45.072 143.428 45.072 146.515 49.768 148.187L68.866 154.229L144.449 108.576C147.578 106.794 150.394 107.852 147.898 110.158L87.569 168.145C84.841 170.658 82.878 171.54 78.9 170.04L47.5 158.309C42.715 156.427 42.468 153.039 48.224 150.306L174.5 98.408C179.221 96.3889 183.371 98.5889 181.278 105.5" fill="white"/>
                </svg>
            </div>
        </div>
        <div class="loading-text">Telegram Chat</div>
        <div class="loading-subtext" id="loading-subtext">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="loading-spinner"></div>
    </div>

    <!-- –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
    <div id="app" style="display: none;">
        <!-- Header -->
        <div class="header">
            <div class="header-left">
                <button class="btn-menu" id="btn-menu">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="chat-info">
                    <div class="chat-title" id="chat-title">–û—Å–Ω–æ–≤–Ω–æ–π —á–∞—Ç</div>
                    <div class="chat-status">
                        <i class="fas fa-circle online-dot"></i>
                        <span id="online-count">0</span> –æ–Ω–ª–∞–π–Ω
                    </div>
                </div>
            </div>
            <div class="header-right">
                <button class="header-btn" id="btn-search">
                    <i class="fas fa-search"></i>
                </button>
                <button class="header-btn" id="btn-more">
                    <i class="fas fa-ellipsis-v"></i>
                </button>
            </div>
        </div>

        <!-- Search Bar -->
        <div class="search-bar" id="search-bar" style="display: none;">
            <div class="search-input-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" id="search-input" placeholder="–ü–æ–∏—Å–∫ –≤ —á–∞—Ç–µ..." autocomplete="off">
                <button class="btn-clear-search" id="btn-clear-search">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <button class="btn-close-search" id="btn-close-search">–û—Ç–º–µ–Ω–∞</button>
        </div>

        <!-- Messages Container -->
        <div class="messages-container" id="messages-container">
            <!-- Unread Messages Badge -->
            <div class="unread-badge" id="unread-badge" style="display: none;">
                <button class="btn-unread" id="btn-unread">
                    <i class="fas fa-check-double"></i>
                    <span id="unread-count">0</span> –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
                </button>
            </div>
            <div class="messages-wrapper" id="messages-wrapper">
                <!-- Messages are loaded here -->
            </div>
            <div class="empty-chat" id="empty-chat">
                <div class="empty-chat-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <div class="empty-chat-title">–ß–∞—Ç –ø—É—Å—Ç–æ–π</div>
                <div class="empty-chat-subtitle">–ù–∞—á–Ω–∏—Ç–µ –æ–±—â–µ–Ω–∏–µ –ø–µ—Ä–≤—ã–º!</div>
            </div>
        </div>

        <!-- Message Actions Menu -->
        <div class="message-actions-menu" id="message-actions-menu" style="display: none;">
            <div class="action-item" data-action="reply">
                <i class="fas fa-reply"></i>
                <span>–û—Ç–≤–µ—Ç–∏—Ç—å</span>
            </div>
            <div class="action-item" data-action="edit">
                <i class="fas fa-edit"></i>
                <span>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</span>
            </div>
            <div class="action-item" data-action="forward">
                <i class="fas fa-share"></i>
                <span>–ü–µ—Ä–µ—Å–ª–∞—Ç—å</span>
            </div>
            <div class="action-item" data-action="pin">
                <i class="fas fa-thumbtack"></i>
                <span>–ó–∞–∫—Ä–µ–ø–∏—Ç—å</span>
            </div>
            <div class="action-item" data-action="unpin" style="display: none;">
                <i class="fas fa-thumbtack"></i>
                <span>–û—Ç–∫—Ä–µ–ø–∏—Ç—å</span>
            </div>
            <div class="action-item" data-action="copy">
                <i class="fas fa-copy"></i>
                <span>–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å</span>
            </div>
            <div class="action-item" data-action="select">
                <i class="fas fa-check-square"></i>
                <span>–í—ã–¥–µ–ª–∏—Ç—å</span>
            </div>
            <div class="action-item danger" data-action="delete">
                <i class="fas fa-trash"></i>
                <span>–£–¥–∞–ª–∏—Ç—å</span>
            </div>
        </div>

        <!-- Forward Messages Menu -->
        <div class="forward-menu" id="forward-menu">
            <div class="forward-header">
                <div class="forward-title">–ü–µ—Ä–µ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è</div>
                <button class="btn-close-forward" id="btn-close-forward">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="channels-list" id="channels-list">
                <!-- Channels will be loaded here -->
            </div>
        </div>

        <!-- Reaction Picker -->
        <div class="reaction-picker" id="reaction-picker">
            <div class="reaction-options">
                <button class="reaction-option" data-reaction="üëç">üëç</button>
                <button class="reaction-option" data-reaction="‚ù§Ô∏è">‚ù§Ô∏è</button>
                <button class="reaction-option" data-reaction="üòÇ">üòÇ</button>
                <button class="reaction-option" data-reaction="üòÆ">üòÆ</button>
                <button class="reaction-option" data-reaction="üò¢">üò¢</button>
                <button class="reaction-option" data-reaction="üëè">üëè</button>
                <button class="reaction-option" data-reaction="üî•">üî•</button>
                <button class="reaction-option" data-reaction="üéâ">üéâ</button>
            </div>
        </div>

        <!-- –ë—ã—Å—Ç—Ä–æ–µ –º–µ–Ω—é —Ä–µ–∞–∫—Ü–∏–π (–ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ) -->
        <div class="quick-reactions-menu" id="quick-reactions-menu" style="display: none;">
            <div class="quick-reaction" data-emoji="üëç" onclick="addQuickReaction('üëç')">üëç</div>
            <div class="quick-reaction" data-emoji="‚ù§Ô∏è" onclick="addQuickReaction('‚ù§Ô∏è')">‚ù§Ô∏è</div>
            <div class="quick-reaction" data-emoji="üòÇ" onclick="addQuickReaction('üòÇ')">üòÇ</div>
            <div class="quick-reaction" data-emoji="üòÆ" onclick="addQuickReaction('üòÆ')">üòÆ</div>
            <div class="quick-reaction" data-emoji="üò¢" onclick="addQuickReaction('üò¢')">üò¢</div>
            <div class="quick-reaction" data-emoji="üëè" onclick="addQuickReaction('üëè')">üëè</div>
            <div class="quick-reaction" data-emoji="üî•" onclick="addQuickReaction('üî•')">üî•</div>
            <div class="quick-reaction" data-emoji="üéâ" onclick="addQuickReaction('üéâ')">üéâ</div>
        </div>

        <!-- Input Area -->
        <div class="input-area" id="input-area">
            <!-- Reply Preview -->
            <div class="reply-preview" id="reply-preview" style="display: none;">
                <div class="reply-info">
                    <div class="reply-sender" id="reply-sender"></div>
                    <div class="reply-text" id="reply-text"></div>
                </div>
                <button class="btn-cancel-reply" id="btn-cancel-reply">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <!-- Voice Message Recording -->
            <div class="voice-recorder" id="voice-recorder" style="display: none;">
                <div class="voice-recorder-header">
                    <div class="recording-indicator">
                        <div class="recording-dot"></div>
                        <span>–ó–∞–ø–∏—Å—å...</span>
                    </div>
                    <div class="recording-timer" id="recording-timer">0:00</div>
                </div>
                <div class="voice-waveform" id="voice-waveform">
                    <!-- Waveform will be generated here -->
                </div>
                <div class="voice-recorder-actions">
                    <button class="btn-cancel-recording" id="btn-cancel-recording">
                        <i class="fas fa-times"></i>
                    </button>
                    <button class="btn-send-voice" id="btn-send-voice">
                        <i class="fas fa-microphone"></i>
                    </button>
                </div>
            </div>

            <!-- Main Input -->
            <div class="input-main">
                <button class="btn-attach" id="btn-attach">
                    <i class="fas fa-plus-circle"></i>
                </button>

                <!-- Attach Menu -->
                <div class="attach-menu" id="attach-menu">
                    <div class="attach-item" data-type="photo">
                        <div class="attach-icon">
                            <i class="fas fa-image"></i>
                        </div>
                        <span>–§–æ—Ç–æ/–í–∏–¥–µ–æ</span>
                    </div>
                    <div class="attach-item" data-type="file">
                        <div class="attach-icon">
                            <i class="fas fa-file"></i>
                        </div>
                        <span>–§–∞–π–ª</span>
                    </div>
                    <div class="attach-item" data-type="voice">
                        <div class="attach-icon">
                            <i class="fas fa-microphone"></i>
                        </div>
                        <span>–ì–æ–ª–æ—Å–æ–≤–æ–µ</span>
                    </div>
                    <div class="attach-item" data-type="poll">
                        <div class="attach-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <span>–û–ø—Ä–æ—Å</span>
                    </div>
                    <div class="attach-item" data-type="sticker">
                        <div class="attach-icon">
                            <i class="fas fa-smile"></i>
                        </div>
                        <span>–°—Ç–∏–∫–µ—Ä</span>
                    </div>
                    <div class="attach-item" data-type="gif">
                        <div class="attach-icon">
                            <i class="fas fa-film"></i>
                        </div>
                        <span>GIF</span>
                    </div>
                </div>

                <div class="input-wrapper">
                    <textarea id="message-input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ" rows="1"></textarea>
                    <div class="input-buttons">
                        <button class="btn-emoji" id="btn-emoji">
                            <i class="far fa-smile"></i>
                        </button>
                        <button class="btn-voice" id="btn-voice">
                            <i class="fas fa-microphone"></i>
                        </button>
                    </div>
                </div>

                <button class="btn-send" id="btn-send" disabled>
                    <i class="fas fa-paper-plane"></i>
                </button>
                
                <!-- –ö–Ω–æ–ø–∫–∞ —Å–∫—Ä–æ–ª–ª–∞ –≤–Ω–∏–∑ -->
                <button class="btn-scroll-down" id="btn-scroll-down" style="display: none;" title="–í–Ω–∏–∑">
                    <i class="fas fa-chevron-down"></i>
                </button>
            </div>
        </div>

        <!-- Emoji Picker -->
        <div class="emoji-picker" id="emoji-picker">
            <div class="emoji-categories">
                <button class="emoji-category active" data-category="smileys">
                    <i class="far fa-smile"></i>
                </button>
                <button class="emoji-category" data-category="people">
                    <i class="fas fa-user"></i>
                </button>
                <button class="emoji-category" data-category="animals">
                    <i class="fas fa-dog"></i>
                </button>
                <button class="emoji-category" data-category="food">
                    <i class="fas fa-apple-alt"></i>
                </button>
                <button class="emoji-category" data-category="travel">
                    <i class="fas fa-car"></i>
                </button>
                <button class="emoji-category" data-category="objects">
                    <i class="fas fa-lightbulb"></i>
                </button>
                <button class="emoji-category" data-category="symbols">
                    <i class="fas fa-heart"></i>
                </button>
                <button class="emoji-category" data-category="flags">
                    <i class="fas fa-flag"></i>
                </button>
            </div>
            <div class="emoji-grid" id="emoji-grid">
                <!-- Emojis will be loaded here -->
            </div>
        </div>

        <!-- Sidebar -->
        <div class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="user-profile">
                    <div class="user-avatar" id="user-avatar">
                        <span id="user-avatar-text">U</span>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                        <div class="user-status" id="user-status">–æ–Ω–ª–∞–π–Ω</div>
                    </div>
                </div>
                <button class="btn-close-sidebar" id="btn-close-sidebar">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="sidebar-content">
                <!-- Channels List -->
                <div class="sidebar-section">
                    <div class="section-title">–ö–∞–Ω–∞–ª—ã</div>
                    <div class="channels-sidebar-list" id="channels-sidebar-list">
                        <div class="channel-item active" data-channel="main">
                            <div class="channel-icon">
                                <i class="fas fa-hashtag"></i>
                            </div>
                            <div class="channel-name">–û—Å–Ω–æ–≤–Ω–æ–π</div>
                            <div class="unread-badge" style="display: none;">0</div>
                        </div>
                    </div>
                    <button class="btn-add-channel" id="btn-add-channel">
                        <i class="fas fa-plus"></i>
                        <span>–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</span>
                    </button>
                </div>

                <!-- Sections/Topics List -->
                <div class="sidebar-section" id="sections-section">
                    <div class="section-title">
                        <span>–†–∞–∑–¥–µ–ª—ã</span>
                        <button class="btn-add-section" id="btn-add-section" title="–°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–¥–µ–ª" style="display: none;">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    <div class="sections-list" id="sections-list">
                        <!-- Sections will be loaded here -->
                    </div>
                </div>

                <!-- Admin Panel -->
                <div class="sidebar-section admin-section" id="admin-section" style="display: none;">
                    <div class="section-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</div>
                    <div class="admin-menu">
                        <div class="admin-item" data-action="users">
                            <i class="fas fa-users"></i>
                            <span>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</span>
                        </div>
                        <div class="admin-item" data-action="roles">
                            <i class="fas fa-user-shield"></i>
                            <span>–†–æ–ª–∏</span>
                        </div>
                        <div class="admin-item" data-action="settings">
                            <i class="fas fa-cog"></i>
                            <span>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</span>
                        </div>
                        <div class="admin-item" data-action="stats">
                            <i class="fas fa-chart-line"></i>
                            <span>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</span>
                        </div>
                    </div>
                </div>

                <!-- Settings -->
                <div class="sidebar-section">
                    <div class="section-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
                    <div class="settings-list">
                        <div class="setting-item" id="theme-toggle">
                            <div class="setting-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <span>–¢–µ–º–Ω–∞—è —Ç–µ–º–∞</span>
                            <div class="setting-toggle">
                                <input type="checkbox" id="theme-switch">
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item" id="mirror-constructor-btn" onclick="showMirrorConstructor()">
                            <div class="setting-icon">
                                <i class="fas fa-code"></i>
                            </div>
                            <span>–°–æ–∑–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª–æ</span>
                            <i class="fas fa-chevron-right"></i>
                        </div>
                        <div class="setting-item">
                            <div class="setting-icon">
                                <i class="fas fa-bell"></i>
                            </div>
                            <span>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</span>
                            <div class="setting-toggle">
                                <input type="checkbox" id="notifications-switch" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                        <div class="setting-item">
                            <div class="setting-icon">
                                <i class="fas fa-volume-up"></i>
                            </div>
                            <span>–ó–≤—É–∫–∏</span>
                            <div class="setting-toggle">
                                <input type="checkbox" id="sounds-switch" checked>
                                <span class="toggle-slider"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="sidebar-footer">
                <div class="app-version">Telegram Mini App v2.0</div>
            </div>
        </div>

        <!-- Overlay -->
        <div class="overlay" id="overlay"></div>

        <!-- Modal Windows -->
        <div class="modal" id="create-channel-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–°–æ–∑–¥–∞—Ç—å –∫–∞–Ω–∞–ª</div>
                    <button class="btn-close-modal" data-modal="create-channel-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="channel-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–∞–Ω–∞–ª–∞</label>
                        <input type="text" id="channel-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ">
                    </div>
                    <div class="form-group">
                        <label for="channel-description">–û–ø–∏—Å–∞–Ω–∏–µ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <textarea id="channel-description" placeholder="–û–ø–∏—à–∏—Ç–µ –∫–∞–Ω–∞–ª" rows="3"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="channel-type">–¢–∏–ø –∫–∞–Ω–∞–ª–∞</label>
                        <select id="channel-type">
                            <option value="public">–ü—É–±–ª–∏—á–Ω—ã–π</option>
                            <option value="private">–ü—Ä–∏–≤–∞—Ç–Ω—ã–π</option>
                        </select>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-modal-secondary" data-modal="create-channel-modal">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-modal-primary" id="btn-create-channel">–°–æ–∑–¥–∞—Ç—å</button>
                </div>
            </div>
        </div>

        <div class="modal" id="manage-roles-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–æ–ª—è–º–∏</div>
                    <button class="btn-close-modal" data-modal="manage-roles-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="roles-list" id="roles-list">
                        <!-- Roles will be loaded here -->
                    </div>
                    <button class="btn-add-role" id="btn-add-role">
                        <i class="fas fa-plus"></i>
                        –î–æ–±–∞–≤–∏—Ç—å —Ä–æ–ª—å
                    </button>
                </div>
            </div>
        </div>

        <!-- Users List Modal (only for admins) -->
        <div class="modal" id="users-list-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–£—á–∞—Å—Ç–Ω–∏–∫–∏ –≥—Ä—É–ø–ø—ã</div>
                    <button class="btn-close-modal" data-modal="users-list-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="users-search">
                        <input type="text" id="users-search-input" placeholder="–ü–æ–∏—Å–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤..." class="search-input">
                    </div>
                    <div class="users-list" id="users-list">
                        <!-- Users will be loaded here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- User Actions Modal -->
        <div class="modal" id="user-actions-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">–î–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º</div>
                    <button class="btn-close-modal" data-modal="user-actions-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="user-info-preview" id="user-info-preview">
                        <!-- User info will be loaded here -->
                    </div>
                    <div class="user-actions-list">
                        <div class="action-group">
                            <div class="action-group-title">–†–æ–ª—å</div>
                            <select id="user-role-select" class="form-select">
                                <option value="user">–£—á–∞—Å—Ç–Ω–∏–∫</option>
                                <option value="moderator">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                                <option value="admin">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                                <option value="main_admin">–ì–ª–∞–≤–Ω—ã–π –∞–¥–º–∏–Ω</option>
                            </select>
                        </div>
                        <div class="action-group">
                            <div class="action-group-title">–î–µ–π—Å—Ç–≤–∏—è</div>
                            <button class="btn-action" id="btn-mute-user" data-action="mute">
                                <i class="fas fa-volume-mute"></i>
                                <span>–ó–∞–≥–ª—É—à–∏—Ç—å</span>
                            </button>
                            <button class="btn-action" id="btn-unmute-user" data-action="unmute" style="display: none;">
                                <i class="fas fa-volume-up"></i>
                                <span>–†–∞–∑–≥–ª—É—à–∏—Ç—å</span>
                            </button>
                            <button class="btn-action danger" id="btn-ban-user" data-action="ban">
                                <i class="fas fa-ban"></i>
                                <span>–ó–∞–±–∞–Ω–∏—Ç—å</span>
                            </button>
                            <button class="btn-action danger" id="btn-unban-user" data-action="unban" style="display: none;">
                                <i class="fas fa-check-circle"></i>
                                <span>–†–∞–∑–±–∞–Ω–∏—Ç—å</span>
                            </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-modal-secondary" data-modal="user-actions-modal">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-modal-primary" id="btn-save-user-actions">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                </div>
            </div>
        </div>

        <div class="modal" id="image-preview-modal">
            <div class="modal-content image-preview">
                <img id="preview-image" src="" alt="">
                <button class="btn-close-preview" id="btn-close-preview">
                    <i class="fas fa-times"></i>
                </button>
                <div class="image-actions">
                    <button class="btn-image-action" id="btn-download-image">
                        <i class="fas fa-download"></i>
                    </button>
                    <button class="btn-image-action" id="btn-share-image">
                        <i class="fas fa-share"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="modal" id="video-player-modal">
            <div class="modal-content video-player">
                <video id="preview-video" controls>
                    <source src="" type="video/mp4">
                    –í–∞—à –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ.
                </video>
                <button class="btn-close-preview" id="btn-close-video">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Sticker Picker Modal -->
        <div class="modal" id="sticker-picker-modal">
            <div class="modal-content sticker-picker">
                <div class="modal-header">
                    <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∏–∫–µ—Ä</div>
                    <button class="btn-close-modal" data-modal="sticker-picker-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="sticker-search">
                        <input type="text" id="sticker-search-input" placeholder="–ü–æ–∏—Å–∫ —Å—Ç–∏–∫–µ—Ä–æ–≤..." class="search-input">
                    </div>
                    <div class="sticker-sets" id="sticker-sets">
                        <div class="loading-stickers">–ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∏–∫–µ—Ä–æ–≤...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- GIF Picker Modal -->
        <div class="modal" id="gif-picker-modal">
            <div class="modal-content gif-picker">
                <div class="modal-header">
                    <div class="modal-title">–í—ã–±–µ—Ä–∏—Ç–µ GIF</div>
                    <button class="btn-close-modal" data-modal="gif-picker-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="gif-search">
                        <input type="text" id="gif-search-input" placeholder="–ü–æ–∏—Å–∫ GIF..." class="search-input">
                        <button class="btn-search-gif" id="btn-search-gif">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                    <div class="gif-grid" id="gif-grid">
                        <div class="loading-gifs">–ó–∞–≥—Ä—É–∑–∫–∞ GIF...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mirror Constructor Modal -->
        <div class="modal" id="mirror-constructor-modal">
            <div class="modal-content mirror-constructor">
                <div class="modal-header">
                    <div class="modal-title">–°–æ–∑–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª–æ</div>
                    <button class="btn-close-modal" data-modal="mirror-constructor-modal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-group">
                        <label for="mirror-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–µ—Ä–∫–∞–ª–∞</label>
                        <input type="text" id="mirror-name" placeholder="–ú–æ–µ –∑–µ—Ä–∫–∞–ª–æ" class="form-input">
                    </div>
                    <div class="form-group">
                        <label for="mirror-token">–¢–æ–∫–µ–Ω –±–æ—Ç–∞ Telegram</label>
                        <input type="text" id="mirror-token" placeholder="123456789:ABCdefGHIjklMNOpqrsTUVwxyz" class="form-input">
                        <small class="form-hint">–¢–æ–∫–µ–Ω –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —É @BotFather –≤ Telegram</small>
                    </div>
                    <div class="form-group">
                        <label for="mirror-domain">–î–æ–º–µ–Ω (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <input type="text" id="mirror-domain" placeholder="https://your-domain.com" class="form-input">
                        <small class="form-hint">–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —Ç–µ–∫—É—â–∏–π –¥–æ–º–µ–Ω</small>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="mirror-public">
                            <span>–ü—É–±–ª–∏—á–Ω–æ–µ –∑–µ—Ä–∫–∞–ª–æ (–¥–æ—Å—Ç—É–ø–Ω–æ –≤—Å–µ–º)</span>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-modal-secondary" data-modal="mirror-constructor-modal">–û—Ç–º–µ–Ω–∞</button>
                    <button class="btn-modal-primary" id="btn-create-mirror">–°–æ–∑–¥–∞—Ç—å –∑–µ—Ä–∫–∞–ª–æ</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Player -->
    <audio id="audio-player" style="display: none;"></audio>

    <!-- Scripts -->
    <script src="script.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤—ã—Å–æ—Ç—É –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
            function setVh() {
                let vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
            
            setVh();
            window.addEventListener('resize', setVh);
            window.addEventListener('orientationchange', setVh);
            
            // –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ iOS
            document.addEventListener('touchmove', function(e) {
                if (e.scale !== 1) e.preventDefault();
            }, { passive: false });
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
            setTimeout(() => {
                if (typeof initApp === 'function') {
                    initApp();
                }
            }, 500);
        });
    </script>
</body>
</html>
